{% schema %}
{
  "name": "Custom Contact Form",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#FFF5E6"
    },
    {
      "type": "color",
      "id": "wave_color_top",
      "label": "Top Wave Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "wave_color_bottom",
      "label": "Bottom Wave Color",
      "default": "#FCE4B6"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Customer Service"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "To help us help you, just fill out the form as best as you can (with the email used for your order)."
    }
  ],
  "presets": [
    {
      "name": "Custom Contact Form"
    }
  ]
}
{% endschema %}

<div class="custom-contact-section">
  <!-- Top Wave (Flipped) -->
  <div class="wave-container top-wave">
    <svg class="desktop-wave" viewBox="0 0 1440 100" preserveAspectRatio="none">
      <path d="M0,100 C36,100 36,45 72,45 S108,100 144,100 S180,45 216,45 S252,100 288,100 S324,45 360,45 S396,100 432,100 S468,45 504,45 S540,100 576,100 S612,45 648,45 S684,100 720,100 S756,45 792,45 S828,100 864,100 S900,45 936,45 S972,100 1008,100 S1044,45 1080,45 S1116,100 1152,100 S1188,45 1224,45 S1260,100 1296,100 S1332,45 1368,45 S1404,100 1440,100 L1440,100 L0,100 Z" fill="{{ section.settings.wave_color_top }}"></path>
    </svg>
    <svg class="mobile-wave" viewBox="0 0 840 100" preserveAspectRatio="none">
      <path d="M0,100 L0,30 C70,30 70,90 140,90 S210,30 280,30 S350,90 420,90 S490,30 560,30 S630,90 700,90 S770,30 840,30 L840,100 Z" fill="{{ section.settings.wave_color_top }}"></path>
    </svg>
  </div>

  <div class="contact-content-wrapper">
    <div class="contact-header">
      <h1 class="contact-heading">{{ section.settings.heading }}</h1>
      <p class="contact-description">{{ section.settings.description }}</p>
    </div>

    <div class="contact-form-container">
      {%- form 'contact', id: 'ContactForm', class: 'custom-contact-form' -%}
        {%- if form.posted_successfully? -%}
          <div class="form-status form-success" tabindex="-1" autofocus>
            <p>Thanks for contacting us! We'll get back to you soon.</p>
          </div>
        {%- elsif form.errors -%}
          <div class="form-status form-error" role="alert" tabindex="-1" autofocus>
            <p>Please fix the errors below.</p>
          </div>
        {%- endif -%}

        <div class="form-row">
          <div class="form-group half-width">
            <label for="ContactForm-first-name">First Name</label>
            <input type="text" id="ContactForm-first-name" name="contact[first_name]" value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}" placeholder="">
          </div>
          <div class="form-group half-width">
            <label for="ContactForm-last-name">Last Name</label>
            <input type="text" id="ContactForm-last-name" name="contact[last_name]" placeholder="">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label for="ContactForm-email">Email Address</label>
            <input type="email" id="ContactForm-email" name="contact[email]" value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}" spellcheck="false" autocapitalize="off" aria-required="true" placeholder="">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label for="ContactForm-body">Message</label>
            <textarea rows="6" id="ContactForm-body" name="contact[{{ 'templates.contact.form.comment' | t }}]" placeholder=""></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="contact-submit-btn">
            SEND MY MESSAGE
          </button>
        </div>
      {%- endform -%}
    </div>
  </div>

  <!-- Bottom Wave -->
  <div class="wave-container bottom-wave">
    <svg class="desktop-wave" viewBox="0 0 1440 100" preserveAspectRatio="none" style="height: 35px;">
      <path d="M0,95 C40,95 40,5 80,5 S120,95 160,95 S200,5 240,5 S280,95 320,95 S360,5 400,5 S440,95 480,95 S520,5 560,5 S600,95 640,95 S680,5 720,5 S760,95 800,95 S840,5 880,5 S920,95 960,95 S1000,5 1040,5 S1080,95 1120,95 S1160,5 1200,5 S1240,95 1280,95 S1320,5 1360,5 S1400,95 1440,95 L1440,100 L0,100 Z" fill="{{ section.settings.wave_color_bottom }}"></path>
    </svg>
    <svg class="mobile-wave" viewBox="0 0 400 60" preserveAspectRatio="none">
      <path d="M0,55 C25,55 25,5 50,5 S75,55 100,55 S125,5 150,5 S175,55 200,55 S225,5 250,5 S275,55 300,55 S325,5 350,5 S375,55 400,55 L400,60 L0,60 Z" fill="{{ section.settings.wave_color_bottom }}"></path>
    </svg>
  </div>
</div>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap');

  .custom-contact-section {
    background-color: {{ section.settings.bg_color }};
    position: relative;
    padding: 100px 0; /* Space for waves */
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    font-family: 'Plus Jakarta Sans', sans-serif;
  }

  /* Wave Containers */
  .wave-container {
    position: absolute;
    left: 0;
    width: 100%;
    line-height: 0;
    z-index: 1;
    pointer-events: none;
  }

  .wave-container svg {
    display: block;
    width: 100%;
    height: 50px; /* Adjust height as needed */
  }

  .top-wave {
    top: 0;
    transform: scaleY(-1); /* Flip vertically */
  }

  .bottom-wave {
    bottom: 0;
  }

  /* Show/Hide waves based on device */
  .mobile-wave { display: none !important; }
  .desktop-wave { display: block !important; }

  @media (max-width: 768px) {
    .mobile-wave { display: block !important; }
    .desktop-wave { display: none !important; }
    
    .wave-container svg.mobile-wave {
      height: 25px !important; /* Reduced height on mobile */
    }
  }


  /* Content Styling */
  .contact-content-wrapper {
    position: relative;
    z-index: 2;
    max-width: 800px;
    margin: 0 auto;
    padding: 0 20px;
    width: 100%;
  }

  .contact-header {
    text-align: center;
    margin-bottom: 50px;
  }

  .contact-heading {
    font-family: 'Playfair Display', serif;
    font-size: 56px;
    font-weight: 500;
    color: #000;
    margin: 0 0 20px;
  }

  .contact-description {
    font-size: 20px;
    color: #333;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.5;
  }

  /* Form Styling */
  .contact-form-container {
    width: 100%;
  }

  .form-row {
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .half-width {
    width: calc(50% - 10px);
  }

  .full-width {
    width: 100%;
  }

  .form-group label {
    font-size: 14px;
    font-weight: 700;
    color: #333;
    margin-bottom: 10px;
    display: block;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    background-color: #fff;
    border: 1px solid #C4C4C4; /* Light grey border */
    border-radius: 8px; /* Rounded corners like reference */
    padding: 15px;
    font-family: inherit;
    font-size: 16px;
    color: #333;
    outline: none;
    transition: border-color 0.2s;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    border-color: #000;
  }

  .form-actions {
    margin-top: 40px;
    text-align: center;
  }

  .contact-submit-btn {
    background-color: #000;
    color: #fff;
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    padding: 18px 60px;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
  }

  .contact-submit-btn:hover {
    background-color: #333;
    transform: translateY(-2px);
  }

  /* Status Messages */
  .form-status {
    padding: 15px;
    margin-bottom: 30px;
    border-radius: 8px;
    text-align: center;
  }
  .form-success { background-color: #d4edda; color: #155724; }
  .form-error { background-color: #f8d7da; color: #721c24; }


  /* Responsive Adjustments */
  @media (max-width: 600px) {
    .contact-heading {
      font-size: 36px;
    }

    .form-row {
      flex-direction: column;
      gap: 25px;
      margin-bottom: 25px;
    }

    .half-width {
      width: 100%;
    }
  }
</style>
